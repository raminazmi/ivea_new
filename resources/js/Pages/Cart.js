import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Head, Link } from '@inertiajs/react';
import { HiX, HiArrowLeft } from 'react-icons/hi';
import { useDispatch, useSelector } from 'react-redux';
import { removeFromCart, updateQuantity, clearCart } from '../store/features/cartSlice';
const Cart = () => {
    const cartItems = useSelector((state) => state.cart.items);
    const dispatch = useDispatch();
    const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const shipping = subtotal > 0 ? 15 : 0;
    const total = subtotal + shipping;
    const sendToWhatsApp = () => {
        const phone = '966501234567';
        const message = `السلام عليكم، أريد طلب المنتجات التالية:%0A%0A
      ${cartItems.map(item => `- ${item.name} (${item.quantity}) = ${item.price * item.quantity} ر.س`).join('%0A')}%0A%0A
      المجموع: ${total} ر.س%0A%0A
      شكراً`;
        window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');
        dispatch(clearCart());
    };
    return (_jsxs(_Fragment, { children: [_jsx(Head, { title: "\u0633\u0644\u0629 \u0627\u0644\u062A\u0633\u0648\u0642" }), _jsx("div", { className: "py-6 md:py-8", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: [_jsx("h1", { className: "text-2xl md:text-3xl font-bold mb-6 md:mb-8", children: "\u0633\u0644\u0629 \u0627\u0644\u062A\u0633\u0648\u0642" }), cartItems.length === 0 ? (_jsxs("div", { className: "text-center py-8 md:py-12", children: [_jsx("div", { className: "bg-gray-200 border-2 border-dashed rounded-xl w-24 h-24 md:w-32 md:h-32 mx-auto" }), _jsx("h3", { className: "text-lg md:text-xl font-semibold mt-4 md:mt-6", children: "\u0633\u0644\u0629 \u0627\u0644\u062A\u0633\u0648\u0642 \u0641\u0627\u0631\u063A\u0629" }), _jsx("p", { className: "text-gray-600 mt-2 mb-6 md:mb-8 text-sm md:text-base", children: "\u0623\u0636\u0641 \u0628\u0639\u0636 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u0625\u0644\u0649 \u0633\u0644\u0629 \u0627\u0644\u062A\u0633\u0648\u0642" }), _jsx(Link, { href: "/products", className: "bg-indigo-600 hover:bg-indigo-700 text-white py-2.5 md:py-3 px-4 md:px-6 rounded-lg inline-flex items-center text-sm md:text-base", children: "\u062A\u0635\u0641\u062D \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A" })] })) : (_jsxs("div", { className: "flex flex-col lg:flex-row gap-6 md:gap-8", children: [_jsx("div", { className: "lg:w-2/3", children: _jsx("div", { className: "bg-white rounded-lg shadow-md overflow-hidden", children: _jsxs("table", { className: "min-w-full", children: [_jsx("thead", { className: "bg-gray-50", children: _jsxs("tr", { children: [_jsx("th", { className: "py-2.5 md:py-3 px-3 md:px-4 text-right text-sm md:text-base", children: "\u0627\u0644\u0645\u0646\u062A\u062C" }), _jsx("th", { className: "py-2.5 md:py-3 px-3 md:px-4 text-sm md:text-base", children: "\u0627\u0644\u0633\u0639\u0631" }), _jsx("th", { className: "py-2.5 md:py-3 px-3 md:px-4 text-sm md:text-base", children: "\u0627\u0644\u0643\u0645\u064A\u0629" }), _jsx("th", { className: "py-2.5 md:py-3 px-3 md:px-4 text-sm md:text-base", children: "\u0627\u0644\u0645\u062C\u0645\u0648\u0639" }), _jsx("th", { className: "py-2.5 md:py-3 px-3 md:px-4" })] }) }), _jsx("tbody", { children: cartItems.map(item => (_jsxs("tr", { className: "border-t", children: [_jsx("td", { className: "py-3 md:py-4 px-3 md:px-4", children: _jsxs("div", { className: "flex items-center", children: [_jsx("div", { className: "bg-gray-200 border-2 border-dashed rounded-xl w-12 h-12 md:w-16 md:h-16" }), _jsx("div", { className: "mr-3 md:mr-4", children: _jsx("h3", { className: "font-medium text-sm md:text-base", children: item.name }) })] }) }), _jsxs("td", { className: "py-3 md:py-4 px-3 md:px-4 text-center text-sm md:text-base", children: [item.price, " \u0631.\u0633"] }), _jsx("td", { className: "py-3 md:py-4 px-3 md:px-4", children: _jsx("input", { type: "number", min: "1", value: item.quantity, onChange: (e) => dispatch(updateQuantity({
                                                                        id: item.id,
                                                                        quantity: parseInt(e.target.value) || 1
                                                                    })), className: "w-14 md:w-16 border rounded p-1 text-center text-sm md:text-base", placeholder: "\u0627\u0644\u0643\u0645\u064A\u0629", title: "\u0643\u0645\u064A\u0629 \u0627\u0644\u0645\u0646\u062A\u062C" }) }), _jsxs("td", { className: "py-3 md:py-4 px-3 md:px-4 text-center text-sm md:text-base", children: [(item.price * item.quantity).toFixed(2), " \u0631.\u0633"] }), _jsx("td", { className: "py-3 md:py-4 px-3 md:px-4 text-center", children: _jsx("button", { onClick: () => dispatch(removeFromCart(item.id)), className: "text-red-500 hover:text-red-700", title: "\u062D\u0630\u0641 \u0627\u0644\u0645\u0646\u062A\u062C \u0645\u0646 \u0627\u0644\u0633\u0644\u0629", children: _jsx(HiX, { className: "h-4 w-4 md:h-5 md:w-5" }) }) })] }, item.id))) })] }) }) }), _jsx("div", { className: "lg:w-1/3", children: _jsxs("div", { className: "bg-white rounded-lg shadow-md p-4 md:p-6", children: [_jsx("h2", { className: "text-lg md:text-xl font-semibold mb-4 md:mb-6", children: "\u0645\u0644\u062E\u0635 \u0627\u0644\u0637\u0644\u0628" }), _jsxs("div", { className: "space-y-3 md:space-y-4 mb-6 md:mb-8", children: [_jsxs("div", { className: "flex justify-between text-sm md:text-base", children: [_jsx("span", { children: "\u0627\u0644\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064A:" }), _jsxs("span", { children: [subtotal.toFixed(2), " \u0631.\u0633"] })] }), _jsxs("div", { className: "flex justify-between text-sm md:text-base", children: [_jsx("span", { children: "\u0627\u0644\u0634\u062D\u0646:" }), _jsxs("span", { children: [shipping, " \u0631.\u0633"] })] }), _jsx("div", { className: "border-t pt-3 md:pt-4", children: _jsxs("div", { className: "flex justify-between font-semibold text-base md:text-lg", children: [_jsx("span", { children: "\u0627\u0644\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064A:" }), _jsxs("span", { children: [total.toFixed(2), " \u0631.\u0633"] })] }) })] }), _jsxs("div", { className: "space-y-3 md:space-y-4", children: [_jsx("button", { onClick: sendToWhatsApp, className: "w-full bg-green-600 hover:bg-green-700 text-white py-2.5 md:py-3 px-4 md:px-6 rounded-lg font-medium text-sm md:text-base transition-colors", children: "\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628 \u0639\u0628\u0631 \u0648\u0627\u062A\u0633\u0627\u0628" }), _jsx("button", { onClick: () => dispatch(clearCart()), className: "w-full bg-red-600 hover:bg-red-700 text-white py-2.5 md:py-3 px-4 md:px-6 rounded-lg font-medium text-sm md:text-base transition-colors", children: "\u062A\u0641\u0631\u064A\u063A \u0627\u0644\u0633\u0644\u0629" }), _jsxs(Link, { href: "/products", className: "w-full bg-gray-600 hover:bg-gray-700 text-white py-2.5 md:py-3 px-4 md:px-6 rounded-lg font-medium text-sm md:text-base transition-colors inline-block text-center", children: [_jsx(HiArrowLeft, { className: "inline ml-2" }), "\u0645\u062A\u0627\u0628\u0639\u0629 \u0627\u0644\u062A\u0633\u0648\u0642"] })] })] }) })] }))] }) })] }));
};
export default Cart;
